# 構文表現のための記法

## 文字列そのものの表現

以下の表現は、その文字列そのものを表す

- アルファベットや記号がそのまま並んでいるもの
    ```scala
    if    // <- if そのものを表す
    ```
- アルファベットや記号をクォートで囲んだもの
    ```scala
    'if' // <- if に等しい
    ```

***

## 要素記号

### () で囲まれた要素
`()`で囲まれた要素はグルーピングを表現し、一つのかたまりとして扱われる

例えば以下の記述は、`if()`という文字の並びをひとまとめにしたものを表す

```scala
('if' '(' ')')  // <- if() というかたまりを表す
```

---

### <> で囲まれた要素
`<>`で囲まれた要素は、何らかの構文であることを表現する

例えば `<式>` という記述は、「式」という概念を表現する構文要素を示す

---

### 要素の後ろに * が付加されたもの
何らかの要素に続いて`*`が付加されたものは、その要素が**0回以上繰り返される**ことを表現する

例えば以下の記述は、`<式>`の後に`;`が来るような要素が0回以上現れることを示す

```scala
(<式> ;)*
```

---

### 要素の後ろに + が付加されたもの
何らかの要素に続いて`+`が付加されたものは、その要素が**1回以上繰り返される**ことを表現する

例えば以下の記述は、`<式>`の後に`;`が来るような要素が1回以上現れることを示す

```scala
(<式> ;)+
```

---

### 要素の後ろに ? が付加されたもの
何らかの要素に続いて`?`が付加されたものは、その要素が**0回または1回現れる**ことを表現する（オプショナルであることを表現する）

例えば以下の記述は、`else`の後に`<式>`が来るような要素が0回または1回現れることを示す

```scala
(else <式>)?
```

---

### 2つの要素の間に | が付加されたもの
何らかの2つの要素AとBの間に`|`が付加されたものは、 **AかBのどちらかが現れる**ことを表現する

例えば以下は、 `val`または`var`のどちらでも良いことを示す

```scala
('val'|'var')
```

ここで`a|b`について、「`a|b`」という3文字なのか、「`a`または`b`」なのかが曖昧であるが、明示的に`'|'`としない限り、「`a`または`b`」という解釈が優先されることとする

---

### 何らかの要素の後に ... が続くもの
任意個数の要素が繰り返されるときに、最初の数個を例示し、残りは同じパターンで出現することを表現する

例えば以下は、`[`と`]`で囲まれ、式が任意の回数繰り返されるパターンを示す

```scala
'[' <式1>, <式2>, ... ']'
```

***

## 構文記法サンプル

以上を踏まえてScalaの`if`式の構文を表現すると、以下のようになる

```scala
if '(' <条件式> ')' <式> ( else <式> )?
```

その他の構文については、[grammar](./grammar)ディレクトリのサンプルコードを参照
